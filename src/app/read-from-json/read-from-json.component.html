<form (ngSubmit)="onSubmit()">

  <div *ngIf="model" class="container marginT10  marginB10">
    <div
      class="row"
      style="padding:30px;"
      [style.backgroundColor]="model.theme.bgColor"
      [style.color]="model.theme.textColor"
    >
      <div *ngIf="success" class="col-12">
        <div class="form-group">
          <label>Your form has been submitted.</label>
        </div>
      </div>

      <form class="ftheme">
        <div *ngIf="!success" class="col-12">
              <p style="color: #007bff;">{{ model.name }}</p>
              <p style="color: #007bff;">{{ model.description }}</p>
            <mat-tab-group >
              <mat-tab *ngFor="let tab of model.tabs">
                <ng-template mat-tab-label>
                  <mat-icon class="example-tab-icon">arrow_right</mat-icon>
  
                  {{ tab.header }}
                </ng-template>

<!-- Start Container By Assaf -->

            <div
              class="panel-group"
              id="accordion"
              role="tablist"
              aria-multiselectable="true"
            >
              <div
                *ngFor="let data of tab.accordions; let i = index"
                class="panel panel-default"
                style="padding:0.2rem 0.2rem"
              >
                <div
                  class="panel-heading bg-secondary "
                  style="padding:0.8rem 0.8rem"
                  role="tab"
                  [id]="'heading' + data.id"
                >
                  <div class="row">
                    <div class="col-11">
                      <h4>
                        
                        <a
                        style="text-decoration: none;"
                          role="button"
                          class="text-white panel-title"
                          data-toggle="collapse"
                          data-parent="#accordion"
                          [href]="'#collapse' + data.id"
                          aria-expanded="true"
                          [attr.aria-controls]="'collapse' + data.id"
                        >
                        {{ data.header }}
                        </a>
                      </h4>
                    </div>
                    <div class="col-1"></div>
                  </div>
                </div>
                <div
                  [id]="'collapse' + data.id"
                  class="panel-collapse collapse"
                  role="tabpanel"
                  [attr.aria-labelledby]="'heading' + data.id"
                >
                  <div class="panel-body">
                    <div
                      *ngFor="let item of data.fields; let i = index"
                      class="form-group panel-body"
                    >
                      <div *ngIf="item.type == 'hr'">
                        <hr
                          style="background-color: #ccc; height: 1px  ;"
                          [attr.relatedTo]="item.relatedTo"
                        />
                      </div>

                      <div *ngIf="item.type == 'h1'">
                        <h1
                          class="form-text"
                          [attr.relatedTo]="item.relatedTo"
                        >
                          {{ item.label }}
                        </h1>
                      </div>

                      <div *ngIf="item.type == 'h2'">
                        <h2
                          class="form-text"
                          [attr.relatedTo]="item.relatedTo"
                        >
                          {{ item.label }}
                        </h2>
                      </div>
                      <div *ngIf="item.type == 'h3'">
                        <h3
                          class="form-text"
                          [attr.relatedTo]="item.relatedTo"
                        >
                          {{ item.label }}
                        </h3>
                      </div>
                      <div *ngIf="item.type == 'h4'">
                        <h4
                          class="form-text"
                          [attr.relatedTo]="item.relatedTo"
                        >
                          {{ item.label }}
                        </h4>
                      </div>
                      <div *ngIf="item.type == 'h5'">
                        <h5
                          class="form-text"
                          [attr.relatedTo]="item.relatedTo"
                        >
                          {{ item.label }}
                        </h5>
                      </div>
                      <div *ngIf="item.type == 'h6'">
                        <h6
                          class="form-text"
                          [attr.relatedTo]="item.relatedTo"
                        >
                          {{ item.label }}
                        </h6>
                      </div>

                      <div *ngIf="item.type == 'paragraph'">
                        <p
                          class="form-text"
                          [attr.relatedTo]="item.relatedTo"
                        >
                          {{ item.label }}
                        </p>
                      </div>

                      <div *ngIf="item.type == 'pre'">
                        <pre
                          class="form-text"
                          [attr.relatedTo]="item.relatedTo"
                          >{{ item.label }}</pre
                        >
                      </div>

                      <div *ngIf="item.type == 'quote'">
                        <q
                          class="form-text"
                          [attr.relatedTo]="item.relatedTo"
                          >{{ item.label }}</q
                        >
                      </div>

                      <div *ngIf="item.type == 'bQuote'">
                        <blockquote
                          class="form-text"
                          [attr.relatedTo]="item.relatedTo"
                        >
                          {{ item.label }}
                        </blockquote>
                      </div>

                      <div *ngIf="item.type == 'span'">
                        <span
                          class="form-text"
                          [attr.relatedTo]="item.relatedTo"
                        >
                          {{ item.label }}
                        </span>
                      </div>

                      <div *ngIf="item.type == 'text'">
                        <label>{{ item.label }}</label>
                        <label *ngIf="item.required" class="text-danger"
                          >*</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="{{ item.name }}"
                          name="{{ item.name }}"
                          placeholder="{{ item.placeholder }}"
                          [(ngModel)]="item.value"
                          [required]="item.required"
                          [ngModelOptions]="{ standalone: true }"
                          autocomplete="off"
                          [attr.relatedTo]="item.relatedTo"
                        />
                      </div>
                      <div *ngIf="item.type == 'email'">
                        <label>{{ item.label }}</label>
                        <label *ngIf="item.required" class="text-danger"
                          >*</label
                        >
                        <input
                          type="email"
                          class="form-control"
                          id="{{ item.name }}"
                          placeholder="{{ item.placeholder }}"
                          [(ngModel)]="item.value"
                          [ngModelOptions]="{ standalone: true }"
                          autocomplete="off"
                          [attr.relatedTo]="item.relatedTo"
                          [required]="item.required"
                        />
                      </div>
                      <div *ngIf="item.type == 'phone'">
                        <label>{{ item.label }}</label>
                        <label *ngIf="item.required" class="text-danger"
                          >*</label
                        >
                        <input
                          type="tel"
                          class="form-control"
                          id="{{ item.name }}"
                          placeholder="{{ item.placeholder }}"
                          [(ngModel)]="item.value"
                          [ngModelOptions]="{ standalone: true }"
                          autocomplete="off"
                          [attr.relatedTo]="item.relatedTo"
                          [required]="item.required"
                        />
                      </div>
                      <div *ngIf="item.type == 'number'">
                        <label>{{ item.label }}</label>
                        <label *ngIf="item.required" class="text-danger"
                          >*</label
                        >
                        <input
                          type="number"
                          Number="true"
                          class="form-control"
                          id="{{ item.name }}"
                          min="{{ item.min }}"
                          max="{{ item.max }}"
                          placeholder="{{ item.placeholder }}"
                          [(ngModel)]="item.value"
                          [ngModelOptions]="{ standalone: true }"
                          autocomplete="off"
                          [attr.relatedTo]="item.relatedTo"
                          [required]="item.required"
                        />
                      </div>
                      <div *ngIf="item.type == 'date'">
                        <label>{{ item.label }}</label>
                        <label *ngIf="item.required" class="text-danger"
                          >*</label
                        >
                        <input
                          [bsConfig]="bsConfig"
                          bsDatepicker
                          readonly
                          class="form-control"
                          id="{{ item.name }}"
                          [(ngModel)]="item.value"
                          [ngModelOptions]="{ standalone: true }"
                          autocomplete="off"
                          [attr.relatedTo]="item.relatedTo"
                          [required]="item.required"
                        />
                      </div>
                      <div *ngIf="item.type == 'datetime-range'">
                        <label>{{ item.label }}</label>
                        <label *ngIf="item.required" class="text-danger"
                          >*</label
                        >
                        <input
                          [bsConfig]="bsConfig"
                          bsDaterangepicker
                          class="form-control"
                          id="{{ item.name }}"
                          placeholder="{{ item.placeholder }}"
                          [(ngModel)]="item.value"
                          [ngModelOptions]="{ standalone: true }"
                          autocomplete="off"
                          [attr.relatedTo]="item.relatedTo"
                          [required]="item.required"
                        />
                      </div>
                      <div *ngIf="item.type == 'textarea'">
                        <label>{{ item.label }}</label>
                        <label *ngIf="item.required" class="text-danger"
                          >*</label
                        >
                        <textarea
                          class="form-control"
                          id="{{ item.name }}"
                          placeholder="{{ item.placeholder }}"
                          [(ngModel)]="item.value"
                          [ngModelOptions]="{ standalone: true }"
                          autocomplete="off"
                          [attr.relatedTo]="item.relatedTo"
                          [required]="item.required"
                        >
                        </textarea>
                      </div>
                      <div *ngIf="item.type == 'file'">
                        <label
                          >{{ item.label }} (File can't be uploaded right
                          now)</label
                        >
                        <label *ngIf="item.required" class="text-danger"
                          >*</label
                        >
                        <input
                          type="file"
                          class="form-control"
                          id="{{ item.name }}"
                          placeholder="{{ item.placeholder }}"
                          [(ngModel)]="item.value"
                          [ngModelOptions]="{ standalone: true }"
                          autocomplete="off"
                          [attr.relatedTo]="item.relatedTo"
                          [required]="item.required"
                        />
                        <small class="form-text text-danger"
                          >(File can't be uploaded right now)</small
                        >
                      </div>

                      <div *ngIf="item.type == 'autocomplete'">
                        <label>{{ item.label }}</label>
                        <label *ngIf="item.required" class="text-danger"
                          >*</label
                        >
                        <select
                          class="form-control"
                          id="{{ item.name }}"
                          [(ngModel)]="item.value"
                          [ngModelOptions]="{ standalone: true }"
                          [attr.relatedTo]="item.relatedTo"
                          [required]="item.required"
                        >
                          <option
                            *ngFor="let v of item.values"
                            [value]="v.value"
                            >{{ v.label }}</option
                          >
                        </select>
                        <!-- <small class="form-text text-muted">{{item.description}}</small> -->
                      </div>
                      <div *ngIf="item.type == 'checkbox'">
                        <label>{{ item.label }}</label>
                        <label *ngIf="item.required" class="text-danger"
                          >*</label
                        >
                        <div
                          *ngFor="let v of item.values"
                          class="inline-form-group"
                        >
                          <label class="cust-check-bx">
                            <input
                              type="checkbox"
                              [value]="v.value"
                              name="{{ item.name }}"
                              (click)="toggleValue(v)"
                              [attr.relatedTo]="item.relatedTo"
                            />
                            {{ v.label }}
                            <span class="checkmark"></span>
                          </label>
                        </div>
                      </div>
                      <div *ngIf="item.type == 'radio'">
                        <label>{{ item.label }}</label>
                        <label *ngIf="item.required" class="text-danger"
                          >*</label
                        >
                        <div
                          *ngFor="let v of item.values"
                          class="inline-form-group"
                        >
                          <label class="cust-check-bx">
                            <input
                              type="radio"
                              [value]="v.value"
                              name="{{ item.name }}"
                              [(ngModel)]="item.value"
                              [ngModelOptions]="{ standalone: true }"
                              [attr.relatedTo]="item.relatedTo"
                            />
                            {{ v.label }}
                            <span class="checkmark"></span>
                          </label>
                        </div>
                      </div>
                      <div
                        *ngIf="item.type == 'button'"
                        class="btn-cont text-center"
                      >
                        <input
                          type="{{ item.subtype }}"
                          (click)="submit(item)"
                          value="{{ item.label }}"
                          class="{{ item.className }}"
                          id="{{ item.name }}"
                          [attr.relatedTo]="item.relatedTo"
                        />
                      </div>

                      <div
                        *ngIf="item.type == 'button-with-reset'"
                        class="btn-cont text-center"
                      >
                        <input
                          type="{{ item.subtype }}"
                          (click)="submit(item)"
                          value="{{ item.label }}"
                          class="{{ item.className }}"
                          id="{{ item.name }}"
                          [attr.relatedTo]="item.relatedTo"
                        />
                        &nbsp;
                        <input
                          type="{{ item.nestedtype }}"
                          value="{{ item.sublabel }}"
                          class="btn btn-success"
                          id="{{ item.name }}"
                          [attr.relatedTo]="item.relatedTo"
                        />
                      </div>

                      <div *ngIf="item.type == 'text-material'">
                        <mat-form-field
                          class="example-full-width"
                          [hideRequiredMarker]="item.hideRequiredMarker"
                          [appearance]="item.appearance"
                          [hintLabel]="item.hintLabel"
                        >
                          <input
                            matInput
                            id="{{ item.name }}"
                            name="{{ item.name }}"
                            placeholder="{{ item.placeholder }}"
                            [(ngModel)]="item.value"
                            [required]="item.required"
                            [ngModelOptions]="{ standalone: true }"
                            autocomplete="off"
                            [attr.relatedTo]="item.relatedTo"
                            [pattern]="item.regex"
                          />
                          <mat-icon matSuffix>title</mat-icon>
                          <mat-error>{{ item.errorText }}</mat-error>
                        </mat-form-field>
                      </div>

                      <div *ngIf="item.type == 'text-length-material'">
                        <mat-form-field
                          class="example-full-width"
                          [hideRequiredMarker]="item.hideRequiredMarker"
                          [appearance]="item.appearance"
                          [hintLabel]="item.hintLabel"
                        >
                          <input
                            matInput
                            id="{{ item.name }}"
                            name="{{ item.name }}"
                            placeholder="{{ item.placeholder }}"
                            [(ngModel)]="item.value"
                            [required]="item.required"
                            [ngModelOptions]="{ standalone: true }"
                            autocomplete="off"
                            [maxlength]="item.maxLength"
                            #template
                            [attr.relatedTo]="item.relatedTo"
                            [pattern]="item.regex"
                          />
                          <mat-hint align="end"
                            >{{ template.value.length }} /
                            {{ item.maxLength }}</mat-hint
                          >
                          <mat-icon matSuffix>lock</mat-icon>
                          <mat-error>{{ item.errorText }}</mat-error>
                        </mat-form-field>
                      </div>

                      <div *ngIf="item.type == 'textarea-material'">
                        <mat-form-field
                          class="example-full-width"
                          [hideRequiredMarker]="item.hideRequiredMarker"
                          [appearance]="item.appearance"
                          [hintLabel]="item.hintLabel"
                        >
                          <textarea
                            matInput
                            id="{{ item.name }}"
                            name="{{ item.name }}"
                            placeholder="{{ item.placeholder }}"
                            [(ngModel)]="item.value"
                            [required]="item.required"
                            [ngModelOptions]="{ standalone: true }"
                            autocomplete="off"
                            [attr.relatedTo]="item.relatedTo"
                            [pattern]="item.regex"
                          ></textarea>
                          <mat-icon matSuffix>text_fields</mat-icon>
                          <mat-error>{{ item.errorText }}</mat-error>
                        </mat-form-field>
                      </div>

                      <div *ngIf="item.type == 'textarea-length-material'">
                        <mat-form-field
                          class="example-full-width"
                          [hideRequiredMarker]="item.hideRequiredMarker"
                          [appearance]="item.appearance"
                          [hintLabel]="item.hintLabel"
                        >
                          <textarea
                            matInput
                            id="{{ item.name }}"
                            name="{{ item.name }}"
                            placeholder="{{ item.placeholder }}"
                            [(ngModel)]="item.value"
                            [required]="item.required"
                            [ngModelOptions]="{ standalone: true }"
                            autocomplete="off"
                            [maxlength]="item.maxLength"
                            #template
                            [attr.relatedTo]="item.relatedTo"
                            [pattern]="item.regex"
                          ></textarea>
                          <mat-hint align="end"
                            >{{ template.value.length }} /
                            {{ item.maxLength }}</mat-hint
                          >
                          <mat-icon matSuffix>lock</mat-icon>
                          <mat-error>{{ item.errorText }}</mat-error>
                        </mat-form-field>
                      </div>

                      <div *ngIf="item.type == 'email-material'">
                        <mat-form-field
                          class="example-full-width"
                          [hideRequiredMarker]="item.hideRequiredMarker"
                          [appearance]="item.appearance"
                          [hintLabel]="item.hintLabel"
                        >
                          <input
                            matInput
                            type="email"
                            id="{{ item.name }}"
                            name="{{ item.name }}"
                            placeholder="{{ item.placeholder }}"
                            [(ngModel)]="item.value"
                            [required]="item.required"
                            [ngModelOptions]="{ standalone: true }"
                            autocomplete="off"
                            [attr.relatedTo]="item.relatedTo"
                            [pattern]="item.regex"
                          />
                          <mat-icon matSuffix>email</mat-icon>
                          <mat-error>{{ item.errorText }}</mat-error>
                        </mat-form-field>
                      </div>

                      <div *ngIf="item.type == 'phone-material'">
                        <mat-form-field
                          class="example-full-width"
                          [hideRequiredMarker]="item.hideRequiredMarker"
                          [appearance]="item.appearance"
                          [hintLabel]="item.hintLabel"
                        >
                          <input
                            matInput
                            type="tel"
                            id="{{ item.name }}"
                            name="{{ item.name }}"
                            placeholder="{{ item.placeholder }}"
                            [(ngModel)]="item.value"
                            [required]="item.required"
                            [ngModelOptions]="{ standalone: true }"
                            autocomplete="off"
                            [attr.relatedTo]="item.relatedTo"
                            [pattern]="item.regex"
                          />
                          <mat-icon matSuffix>phone</mat-icon>
                          <mat-error>{{ item.errorText }}</mat-error>
                        </mat-form-field>
                      </div>

                      <div *ngIf="item.type == 'number-material'">
                        <mat-form-field
                          class="example-full-width"
                          [hideRequiredMarker]="item.hideRequiredMarker"
                          [appearance]="item.appearance"
                          [hintLabel]="item.hintLabel"
                        >
                          <input
                            matInput
                            Number="true"
                            type="number"
                            id="{{ item.name }}"
                            name="{{ item.name }}"
                            placeholder="{{ item.placeholder }}"
                            [(ngModel)]="item.value"
                            [required]="item.required"
                            [ngModelOptions]="{ standalone: true }"
                            autocomplete="off"
                            [attr.relatedTo]="item.relatedTo"
                          />
                          <mat-icon matSuffix>filter_9_plus</mat-icon>
                          <mat-error>{{ item.errorText }}</mat-error>
                        </mat-form-field>
                      </div>

                      <div *ngIf="item.type == 'clearable-material'">
                        <mat-form-field
                          class="example-full-width"
                          [hideRequiredMarker]="item.hideRequiredMarker"
                          [appearance]="item.appearance"
                          [hintLabel]="item.hintLabel"
                        >
                          <input
                            matInput
                            type="text"
                            id="{{ item.name }}"
                            name="{{ item.name }}"
                            placeholder="{{ item.placeholder }}"
                            [(ngModel)]="item.value"
                            [required]="item.required"
                            [ngModelOptions]="{ standalone: true }"
                            autocomplete="off"
                            [attr.relatedTo]="item.relatedTo"
                            [pattern]="item.regex"
                          />
                          <button
                            mat-button
                            *ngIf="item.value"
                            matSuffix
                            mat-icon-button
                            aria-label="Clear"
                            (click)="item.value = ''"
                          >
                            <mat-icon>close</mat-icon>
                          </button>
                          <mat-icon matSuffix>clear_all</mat-icon>
                          <mat-error>{{ item.errorText }}</mat-error>
                        </mat-form-field>
                      </div>

                      <div *ngIf="item.type == 'basic-datepicker-material'">
                        <mat-form-field class="example-full-width">
                          <input
                            matInput
                            [matDatepicker]="picker"
                            id="{{ item.name }}"
                            name="{{ item.name }}"
                            placeholder="{{ item.placeholder }}"
                            [(ngModel)]="item.value"
                            [required]="item.required"
                            [ngModelOptions]="{ standalone: true }"
                            autocomplete="off"
                            [attr.relatedTo]="item.relatedTo"
                            [pattern]="item.regex"
                          />
                          <mat-datepicker-toggle
                            matSuffix
                            [for]="picker"
                          ></mat-datepicker-toggle>
                          <mat-datepicker #picker></mat-datepicker>
                          <mat-error>{{ item.errorText }}</mat-error>
                        </mat-form-field>
                      </div>

                      <div
                        *ngIf="item.type == 'start-date-datepicker-material'"
                      >
                        <mat-form-field class="example-full-width">
                          <input
                            matInput
                            [matDatepicker]="picker"
                            id="{{ item.name }}"
                            name="{{ item.name }}"
                            placeholder="{{ item.placeholder }}"
                            [(ngModel)]="item.value"
                            [required]="item.required"
                            [ngModelOptions]="{ standalone: true }"
                            autocomplete="off"
                            [attr.relatedTo]="item.relatedTo"
                            [pattern]="item.regex"
                          />
                          <mat-datepicker-toggle
                            matSuffix
                            [for]="picker"
                          ></mat-datepicker-toggle>
                          <mat-datepicker
                            #picker
                            startView="year"
                            [startAt]="startDate"
                          ></mat-datepicker>
                          <mat-error>{{ item.errorText }}</mat-error>
                        </mat-form-field>
                      </div>

                      <div
                        *ngIf="
                          item.type ==
                          'min-max-validation-datepicker-material'
                        "
                      >
                        <mat-form-field class="example-full-width">
                          <input
                            matInput
                            [matDatepicker]="picker"
                            [min]="item.minDate"
                            [max]="item.maxDate"
                            id="{{ item.name }}"
                            name="{{ item.name }}"
                            placeholder="{{ item.placeholder }}"
                            [(ngModel)]="item.value"
                            [required]="item.required"
                            [ngModelOptions]="{ standalone: true }"
                            autocomplete="off"
                            [attr.relatedTo]="item.relatedTo"
                            [pattern]="item.regex"
                          />
                          <mat-datepicker-toggle
                            matSuffix
                            [for]="picker"
                          ></mat-datepicker-toggle>
                          <mat-datepicker #picker></mat-datepicker>
                          <mat-error>{{ item.errorText }}</mat-error>
                        </mat-form-field>
                      </div>

                      <div
                        *ngIf="
                          item.type == 'touch-ui-date-datepicker-material'
                        "
                      >
                        <mat-form-field class="example-full-width">
                          <input
                            matInput
                            [matDatepicker]="picker"
                            id="{{ item.name }}"
                            name="{{ item.name }}"
                            placeholder="{{ item.placeholder }}"
                            [(ngModel)]="item.value"
                            [required]="item.required"
                            [ngModelOptions]="{ standalone: true }"
                            autocomplete="off"
                            [attr.relatedTo]="item.relatedTo"
                            [pattern]="item.regex"
                          />
                          <mat-datepicker-toggle
                            matSuffix
                            [for]="picker"
                          ></mat-datepicker-toggle>
                          <mat-datepicker touchUi #picker></mat-datepicker>
                          <mat-error>{{ item.errorText }}</mat-error>
                        </mat-form-field>
                      </div>

                      <div
                        *ngIf="
                          item.type == 'open-method-date-datepicker-material'
                        "
                      >
                        <mat-form-field class="example-full-width">
                          <input
                            matInput
                            [matDatepicker]="picker"
                            id="{{ item.name }}"
                            name="{{ item.name }}"
                            placeholder="{{ item.placeholder }}"
                            [(ngModel)]="item.value"
                            [required]="item.required"
                            [ngModelOptions]="{ standalone: true }"
                            autocomplete="off"
                            [attr.relatedTo]="item.relatedTo"
                            [pattern]="item.regex"
                          />
                          <mat-datepicker #picker></mat-datepicker>
                          <button
                            class="float-right"
                            mat-raised-button
                            (click)="picker.open()"
                          >
                            Open
                          </button>
                          <mat-error>{{ item.errorText }}</mat-error>
                        </mat-form-field>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
<!-- End Container by Assaf -->

</mat-tab>
</mat-tab-group>

      
        </div>
      </form>
    </div>
  </div>
</form>